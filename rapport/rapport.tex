
\documentclass{article}
\usepackage{geometry} % see geometry.pdf on how to lay out the page. There's lots.
\geometry{a4paper} % or letter or a5paper or ... etc
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[french,english]{babel}
\usepackage{dirtree}

% \geometry{landscape} % rotated page geometry

% See the ``Article customise'' template for come common customisations

\title{Rapport intermédaire du projet long \\ La cabane à oiseaux connectée }
\author{Harmony Simon-Duchatel, Clément Blérald}

%%% BEGIN DOCUMENT
\begin{document}

\maketitle


\section{Présentation}
\paragraph {}
Une cabane à oiseaux est un bon moyen d'attirer mésanges et moineaux. Mais il est fort probable que d'autres espèces moins appréciées viennent s'y nourrir. \\
C'est pour cela que nous proposons de créé une cabane à oiseaux connectée, capable de détecter une présence dans la cabane et de déterminer l'espèce de l'oiseau s'y trouvant. 
Nous avons choisis d'implementer notre projet en python pour sa simplicités d'utilisation, et ses différentes librairie permettant de faire du traitement d'image, notamment OpenCV.
\section{Réalisation actuel} 
\paragraph {}
Pour débuter, nous avons établis un fichier déterminant les principaux oiseaux que nous serrons capables d'attirer à Paris, avec leurs caractéristiques. \\
Pour enregistrer des photos d'oiseaux nous avons écrit un petit programme qui enregistre les photos en passant un url de cette photo. Nous redéfinissons également la taille de l'image afin d'avoir des images de même taille que notre image du fond.\\
Nous avons ensuite implémenter un premier programme afin de determiner si un oiseau était présent.
Pour cela nous avons décidez d'opter pour la technique qui repose sur ce calcul  avec $p_{i}$ les pixels de l'image avec oiseau et $p_{b}$ les pixels de l'image du fond: 
$$
pixel = p_{i} - p_{b}
$$
et nous mettons en blanc les pixels trouvés ayant une trop grande différence avec le fond. Cette méthode a été choisis pour sa facilitée et nous nous reposons sur le fait que la camera sera toujours orientée vers un côté de la cabane. Le fond restera toujours le même peut importe l'oiseau devant. Cela nous donne un masque représentant la forme de l'oiseau ciblé et qui nous seras également utile pour l'analyse de couleur.\\
Afin de trouver a quelle espèce appartient l'oiseau, nous avons choisis de faire une étude sur les couleurs de l'oiseau. Pour cela nous utilisons une fonction d'openCV qui nous fourni un histogramme en fonction l'image et de son masque. Cela nous permet d'obtenir l'histogramme uniquement sur l'oiseau et non pas l'oiseau et le fond. \\
L'histogramme représente le nombre de pixels sur l'image en fonction de leurs intensités.\\

Pour chaque oiseaux que nous souhaitons détecter : des histogrammes sont créés au préalable avec des photos (4 ici) de l'oiseau référence.
Pour déterminer le pourcentage de ressemblance de l'oiseau cible (entrant dans la cabane) et d'un oiseaux de référence, nous comparons l'histogramme de ce dernier avec les 4 histogrammes de l'oiseaux de référence. Le résultat correspond au pourcentage le plus haut obtenu avec ces 4 comparaisons\\

A partir de ces histogrammes nous construisons un tableau correspondant au pourcentages 16 tons de couleurs que nous avons choisis.
Cette méthode à été privilégié pour tenir compte de la taille de l'individu.
Comparer les tons en absolu aurait données des résultats très différent pour un individu adulte et enfant. \\

Afin de mettre tout cela en pratique, nous disposons d'une boite en bois  (appelé fièrement cabane à oiseaux), que nous améliorerons afin d'y placer une caméra et un RapsberryPi.\\

Coté architecture, voilà l'arborescence de notre projet:

\dirtree{%
.1 blerald-simon-duchatel-2021.
   .2 code/.
       .3 color\_analysis.py.
       .3 enregistrement\_resize.py.
       .3 main.py.
       .3 mask.py.
   .2 info\_image\_oiseaux/.
   	.3 image\_blanche.jpeg.
	.3 images\_test.txt.
	.3 images.txt.
	.3 oiseaux\_parisiens.csv.
   .2 rapport/.
   	.3 Makefile.
	.3 rapport.tex.
   .2 seances/.
   	.3 Etape3.txt.
	.3 Materiel.txt.
	.3 Objectifs.txt.
	.3 template\_projet.md.
	.3 trucs\_et\_astuce.txt.
	   .2 cabane.pdf.
   .2 journal.org.
   .2 Makefile.
   .2 README.md.
   .2 requirements.txt.
}

Le Makefile permet de créé en environment virtuel avec tout les dépendances nécessaires, 2 dossiers pour l'enregistrement des photos, et de lancer le main afin d'avoir une démonstration de notre projet.\\

\section{difficultés rencontrés}
Au début nous avons beaucoup hésité sur quelle technique adoptée, apprentissage profond ou apprentissage automatique. Du faite qu'il est tres compliquer voir  impossible de trouver des bases de données sur les oiseaux et leurs particularités. Nous nous somme dirigés vers le traitement d'images afin de traiter l'oiseau avec nous quelques comparaisons faite au préalable. \\ 
Cependant la technique utilisées (difference de pixel entre le fond et l'image) avec un fond blanc est peu pratique car certains oiseaux dispose de blanc dans leurs plumage et nous le prenons pas en compte dans les histogrammes. Le problème sera peut être résolu avec la cabane car le fond sera de couleur bois (moins présente chez les oiseaux)
Un second contre temps a été sur la cabane, ou placer la camera pour avoir le meilleur angle ? Quelle taille doit faire la cabane? 
\section{Prochaines étapes}
\paragraph{}
Nous allons passer des images sur fond blanc a un flux videos, nous nous servirons du fond de la cabane (fixe) comme avec le fond blanc. \\
De plus nous disposons actuellement des matériaux pour construire la cabane. \\
Ensuite il nous faudra rajouter des tests pour la couleur.

\end{document}
